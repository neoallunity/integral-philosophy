# Руководство по использованию семантических макросов редакции

## Общая концепция

Модуль `cfg-editorial.tex` обеспечивает семантическую абстракцию над элементами оформления журнала. Все визуальное форматирование вынесено в конфигурационные файлы, а в главах остаются только логические конструкции.

---

## 1. Семантические макросы персоналий

### `\EditorInChief{Имя}`

**Назначение:** Главный редактор  
**Применение:**
```latex
\EditorInChief{Моисеев В.\,И.}
```

**Вывод:** `Гл. редактор Моисеев В. И.`

### `\Editor{Имя}`

**Назначение:** Редактор (обычный)  
**Применение:**
```latex
\Editor{Луговская Е.\,Г.}
```

**Вывод:** `Редактор Луговская Е. Г.`

### `\ArticleAuthor[номер]{Имя}`

**Назначение:** Автор статьи с опциональной аффилиацией  
**Применение:**
```latex
\ArticleAuthor{Иванов И.\,И.}        % без номера
\ArticleAuthor[1]{Петров П.\,П.}     % с надстрочным номером аффилиации
```

---

## 2. Окружения для структурных элементов

### `foreword` — предисловие (русское)

**Применение:**
```latex
\begin{foreword}[Заголовок]  % опционально, по умолчанию "Предисловие"

Текст предисловия...

\begin{editorialnote}
  \EditorInChief{Моисеев В.\,И.}
\end{editorialnote}

\end{foreword}
```

**Автоматически:**
- Создает ненумерованную главу
- Добавляет запись в содержание
- Устанавливает колонтитулы
- Очищает страницу в конце

### `forewordEN` — предисловие (английское)

**Применение:**
```latex
\begin{forewordEN}[Foreword]  % опционально

Foreword text...

\begin{editorialnote}
  \EditorInChief{Moiseev V.\,I.}
\end{editorialnote}

\end{forewordEN}
```

### `editorialnote` — редакционная подпись

**Применение:**
```latex
\begin{editorialnote}
  \EditorInChief{Моисеев В.\,И.}\\
  \Editor{Луговская Е.\,Г.}
\end{editorialnote}
```

**Автоматически:**
- Добавляет вертикальные отступы (1.2см сверху, 0.5см снизу)
- Выравнивает содержимое по правому краю

### `abstractsection` — раздел аннотаций

**Применение:**
```latex
\begin{abstractsection}[Abstract]  % опционально

\SingleAbstract{Author Name}
              {Article Title}
              {Abstract text...}
              {Keywords: keyword1, keyword2}

\end{abstractsection}
```

### `authorsinfo` — информация об авторах

**Применение:**
```latex
\begin{authorsinfo}[Авторы]  % опционально

\AuthorBio{Иванов И.\,И.}
          {Доктор философских наук, профессор...}

\AuthorBio{Петров П.\,П.}
          {Кандидат технических наук, доцент...}

\end{authorsinfo}
```

---

## 3. Макрос отдельной аннотации

### `\SingleAbstract{автор}{название}{текст}{ключевые слова}`

**Применение:**
```latex
\SingleAbstract{Иванов И.\,И.}
              {Онтология квантовой запутанности}
              {В статье рассматривается...}
              {Keywords: ontology, quantum entanglement, consciousness}
```

**Автоматически:**
- Создает подразделы для автора и названия
- Форматирует отступы между элементами
- Выделяет ключевые слова курсивом

---

## 4. Макрос биографии автора

### `\AuthorBio{Имя}{Биография}`

**Применение:**
```latex
\AuthorBio{Иванов Иван Иванович}
          {Доктор философских наук, профессор кафедры философии МГУ. 
           Область научных интересов: философия сознания, квантовая онтология.}
```

---

## 5. Расширение системы макросов

### Добавление новых персоналий

Добавьте в `cfg-editorial.tex`:

```latex
% Заместитель главного редактора
\NewDocumentCommand{\DeputyEditor}{m}{%
  \textsc{Зам. гл. редактора} #1%
}

% Научный секретарь
\NewDocumentCommand{\ScientificSecretary}{m}{%
  \textsc{Научный секретарь} #1%
}
```

### Настройка отступов

Измените параметры в `editorialnote`:

```latex
\NewDocumentEnvironment{editorialnote}{}{%
  \vspace{1.5cm}%    % ИЗМЕНИТЬ: отступ сверху
  \begin{flushright}%
}{%
  \end{flushright}%
  \vspace{0.8cm}%    % ИЗМЕНИТЬ: отступ снизу
}
```

### Изменение стиля колонтитулов

Если предисловие требует особого стиля колонтитулов, измените в окружении:

```latex
\NewDocumentEnvironment{foreword}{O{Предисловие}}{%
  \chapter*{#1}%
  \addcontentsline{toc}{chapter}{#1}%
  \markboth{#1}{#1}%
  \thispagestyle{journalHot}%  % ИЗМЕНИТЬ: journalPlain → journalHot
}{%
  \clearpage%
}
```

---

## 6. Миграция существующего кода

### До:
```latex
\chapter*{Предисловие}
\addcontentsline{toc}{chapter}{Предисловие}
\markboth{Предисловие}{Предисловие}

Текст предисловия...

\vspace{1cm}
\begin{flushright}
Гл. редактор Моисеев В.И.
\end{flushright}

\clearpage
```

### После:
```latex
\begin{foreword}

Текст предисловия...

\begin{editorialnote}
  \EditorInChief{Моисеев В.\,И.}
\end{editorialnote}

\end{foreword}
```

---

## 7. Преимущества подхода

**[Проверено]**
1. **Читаемость:** Код глав становится декларативным и самодокументируемым
2. **Поддерживаемость:** Все изменения оформления вносятся централизованно
3. **Согласованность:** Автоматическое единообразие всех редакционных элементов
4. **Расширяемость:** Простое добавление новых семантических конструкций

**[Предположение]**
5. **Локализация:** Упрощается перевод на другие языки (достаточно изменить макросы)
6. **Рефакторинг:** Возможность массовых изменений без риска ошибок

---

## 8. Структура конфигурации

```
cfg/
├── cfg-editorial.tex       ← НОВЫЙ: семантические макросы редакции
├── cfg-headers.tex         ← колонтитулы и декоративные элементы
├── cfg-structure.tex       ← заголовки глав/разделов
├── cfg-articles.tex        ← макросы статей
└── ...
```

**Принцип разделения ответственности:**
- `cfg-editorial.tex` — **что** (логика: предисловие, авторы, подписи)
- `cfg-headers.tex` — **как** (визуал: bullets, цвета, линии)
- `cfg-structure.tex` — **иерархия** (нумерация, оглавление)

---

## 9. Контрольный список применения

- [ ] Добавить `\input{cfg/cfg-editorial}` в `preamble.tex`
- [ ] Заменить прямые команды форматирования на семантические макросы
- [ ] Удалить `\vspace`, `\begin{flushright}` из глав
- [ ] Проверить компиляцию: `latexmk -lualatex main.tex`
- [ ] Убедиться, что колонтитулы корректны
- [ ] Проверить содержание и навигацию

---

## 10. Обратная совместимость

**[Не проверено]** Старые команды (`\chapter*`, `\vspace` и т.д.) продолжают работать, но рекомендуется мигрировать на новые макросы для единообразия.

**Критическое замечание:** При использовании новых окружений убедитесь, что не дублируются команды `\clearpage` или `\addcontentsline`.
